<#assign base=request.contextPath />
<#assign stxbase = base+"/static"/>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="keywords" content="admin, dashboard, bootstrap, template, flat, modern, theme, responsive, fluid, retina, backend, html5, css, css3">
	<meta name="description" content="">
	<meta name="author" content="ThemeBucket">
	<link href="${stxbase}/css/admin-style.css" rel="stylesheet">
	<link href="${stxbase}/css/style-responsive.css" rel="stylesheet">
	<link href="${stxbase}/css/jasny-bootstrap.min.css" rel="stylesheet">
	<style>
		.title{
			margin-left: 25px;
			line-height: 40px;
		}
		.control-label{
			margin-top: 8px;
		}
		.modal-dialog .form-group{
			height: 36px;
			overflow: hidden;
			margin-top: 20px;
		}
	</style>
</head>
<body style="background: white;">
	<div class="row">
		<div class="col-md-12">
			<!--breadcrumbs start -->
			<ul class="breadcrumb panel">
				<li><a href="${base}/admin/index"><i class="fa fa-home"></i>首页</a></li>
				<li class="active">个人信息修改</li>
			</ul>
			<!--breadcrumbs end -->
		</div>
	</div>
	<div class="row ">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-12">
					<div class="panel ">
						<div class="panel-body ">
							<form class="form-horizontal adminex-form "
								action="${base}/userInfo/modifyUserInfo"
								method="post" enctype="multipart/form-data" id="form">
								<div class="alert fade in"  style="display: none">
									<button type="button" class="close close-sm" id="butt"
										data-dismiss="alert">
										<i class="fa fa-times"></i>
									</button>
									<div></div>
								</div>
								<input type="hidden" name="id" value="${user.id}" />
								<div class="form-group profile-pic text-center">
									<div class="fileinput fileinput-new"
										data-provides="fileinput">
										<div class="fileinput-new" style="width:200px;height:200px;">
											<#if user.icon?exists>
												<img data-src="holder.js/100x100" src="${base}${user.icon.filePath}"/>
												<#else/>
												<img data-src="holder.js/100x100" src="${stxbase}/images/icon.jpg"/>
											</#if>
										</div>
										<div class="fileinput-preview fileinput-exists " style="width: 200px; height: 200px;"></div>
										<div>
											<span class="btn btn-default btn-file">
											<span class="fileinput-new">选择图片</span>
											<span class="fileinput-exists">修改</span>
											<input type="file" name="file"></span>
											<a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">取消</a>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 col-sm-2 control-label">登录用户名</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" id="loginName"
											name="loginName" value="${user.loginName}" pattern=".{1,20}" title="长度1～20之间"
											placeholder="请输入用户名" readonly="readonly">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 col-sm-2 control-label">手机号码</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" id="phoneNum" required
											name="phoneNum" value="${user.phoneNum}" pattern=".{1,20}" title="长度1～20之间"
											placeholder="请输入手机号">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 col-sm-2 control-label">电子邮箱</label>
									<div class="col-sm-10">
										<input type="email" class="form-control" id="eMail" required
											   name="eMail" value="${user.eMail}" pattern=".{10,100}" title="长度10～100之间"
											   placeholder="请输入手机号">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 col-sm-2 control-label">姓名</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" id="name"  pattern=".{1,10}" title="长度1～10之间" required
											value="${user.name}" name="name" placeholder="请输入姓名">
									</div>
								</div>
								<div class="form-group">
									<!--suppress XmlInvalidId -->
									<label class="col-sm-2 control-label col-lg-2" for="inputSuccess">性别</label>
									<div class="col-lg-10">
											<#if user.sex=='1'>
												<label class="checkbox-inline">
												<input type="radio" checked name="sex" value="1"> 男
												</label>
												<label class="checkbox-inline">
												<input type="radio"  name="sex" value="2"> 女
												</label>
												<#else/>
												<label class="checkbox-inline">
												<input type="radio"  name="sex" value="1"> 男
												</label>
												<label class="checkbox-inline">
												<input type="radio" checked name="sex" value="2"> 女
												</label>
											</#if>
									</div>
								</div>
								<div class="form-group">
									<div class="col-lg-offset-2 col-lg-10">
										<button type="submit" class="btn btn-success">保存</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="${stxbase}/js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="${stxbase}/js/bootstrap.js"></script>
<script type="text/javascript" src="${stxbase}/js/jquery-ui-1.9.2.custom.min.js"></script>
<script type="text/javascript" src="${stxbase}/js/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="${stxbase}/js/modernizr.min.js"></script>
<script type="text/javascript" src="${stxbase}/js/jquery.nicescroll.js"></script>
<script type="text/javascript" src="${stxbase}/js/jasny-bootstrap.min.js"></script>
<script type="text/javascript" src="${stxbase}/js/jquery.form.js"></script>
<script type="text/javascript" src="${stxbase}/js/layer/layer.js"></script>
<script type="text/javascript">
	var load="";
	$(document).ready(function() {
		/**
		 * 表单提交
		 */
		$("#form").ajaxForm({"beforeSubmit":beforeSubmit,"success":success});
	});
	/**
	 * 提交结束之前遮罩层
	 */
	function beforeSubmit(){
		load = layer.load(0, {shade: [0.8, '#393D49']});
	}
	/**
	 * 提交成功回调
	 * @param data
	 */
	function success(data){
		layer.close(load);
		//滚动条置顶
		window.scrollTo(0,0);
		$('.alert').show();
		if(data.status=="success"){
			$(".alert").addClass("alert-success");
		}else{
			$(".alert").addClass("alert-danger");
		}
		$(".alert").find("div").eq(0).html("");
		$(".alert").find("div").eq(0).html(data.msg);
	}
</script>
</html>


